!function(a){a.define=function(b){try{delete a.define}catch(c){a.define=void 0}a.when=b()},a.define.amd={},/** @license MIT License (c) copyright 2011-2013 original author or authors */
function(a,b){"use strict";a(function(a){function c(a,b,c,e){return d(a).then(b,c,e)}function d(a){return a instanceof e?a:f(a)}function e(a,b){this._message=a,this.inspect=b}function f(a){return i(function(b){b(a)})}function g(a){return c(a,m)}function h(){function a(a,e,g){b.resolve=b.resolver.resolve=function(b){return d?f(b):(d=!0,a(b),c)},b.reject=b.resolver.reject=function(a){return d?f(m(a)):(d=!0,e(a),c)},b.notify=b.resolver.notify=function(a){return g(a),a}}var b,c,d;return b={promise:W,resolve:W,reject:W,notify:W,resolver:{resolve:W,reject:W,notify:W}},b.promise=c=i(a),b}function i(a){return j(a,T.PromiseStatus&&T.PromiseStatus())}function j(a,b){function c(a,b,c,d){function e(e){e._message(a,b,c,d)}l?l.push(e):G(function(){e(j)})}function d(){return j?j.inspect():F()}function f(a){if(l){var c=l;l=W,G(function(){j=p(i,a),b&&t(j,b),k(c,j)})}}function g(a){f(m(a))}function h(a){if(l){var b=l;G(function(){k(b,o(a))})}}var i,j,l=[];i=new e(c,d),i._status=b;try{a(f,g,h)}catch(n){g(n)}return i}function k(a,b){for(var c=0;c<a.length;c++)a[c](b)}function l(a){return n(new r(a),function(){return D(a)})}function m(a){return n(new s(a),function(){return E(a)})}function n(a,b){return new e(function(b,c,d){try{d(a[b].apply(a,c))}catch(e){d(m(e))}},b)}function o(a){return new e(function(b,c,d,e){var f=c[2];try{e("function"==typeof f?f(a):a)}catch(g){e(g)}})}function p(a,b){if(b===a)return m(new TypeError);if(b instanceof e)return b;try{var c=b===Object(b)&&b.then;return"function"==typeof c?q(c,b):l(b)}catch(d){return m(d)}}function q(a,b){return i(function(c,d){M(a,b,c,d)})}function r(a){this.value=a}function s(a){this.reason=a}function t(a,b){function c(){b.fulfilled()}function d(a){b.rejected(a)}a.then(c,d)}function u(a){return a&&"function"==typeof a.then}function v(a,b,d,e,f){return c(a,function(a){function g(d,e,f){function g(a){n(a)}function h(a){m(a)}var i,j,k,l,m,n,o,p;if(o=a.length>>>0,i=Math.max(0,Math.min(b,o)),k=[],j=o-i+1,l=[],i)for(n=function(a){l.push(a),--j||(m=n=I,e(l))},m=function(a){k.push(a),--i||(m=n=I,d(k))},p=0;o>p;++p)p in a&&c(a[p],h,g,f);else d(k)}return i(g).then(d,e,f)})}function w(a,b,c,d){function e(a){return b?b(a[0]):a[0]}return v(a,1,e,c,d)}function x(a,b,c,d){return B(a,I).then(b,c,d)}function y(){return B(arguments,I)}function z(a){return B(a,D,E)}function A(a,b){return B(a,b)}function B(a,b,d){return c(a,function(a){function e(e,f,g){function h(a,h){c(a,b,d).then(function(a){i[h]=a,--k||e(i)},f,g)}var i,j,k,l;if(k=j=a.length>>>0,i=[],!k)return void e(i);for(l=0;j>l;l++)l in a?h(a[l],l):--k}return j(e)})}function C(a,b){var d=M(L,arguments,1);return c(a,function(a){var e;return e=a.length,d[0]=function(a,d,f){return c(a,function(a){return c(d,function(c){return b(a,c,f,e)})})},K.apply(a,d)})}function D(a){return{state:"fulfilled",value:a}}function E(a){return{state:"rejected",reason:a}}function F(){return{state:"pending"}}function G(a){1===O.push(a)&&N(H)}function H(){k(O),O=[]}function I(a){return a}function J(a){throw"function"==typeof T.reportUnhandled?T.reportUnhandled():G(function(){throw a}),a}c.promise=i,c.resolve=f,c.reject=g,c.defer=h,c.join=y,c.all=x,c.map=A,c.reduce=C,c.settle=z,c.any=w,c.some=v,c.isPromise=u,c.isPromiseLike=u,e.prototype={then:function(){var a,b;return a=arguments,b=this._message,j(function(c,d,e){b("when",a,c,e)},this._status&&this._status.observed())},otherwise:function(a){return this.then(W,a)},ensure:function(a){function b(){return f(a())}return"function"==typeof a?this.then(b,b)["yield"](this):this},done:function(a,b){this.then(a,b).otherwise(J)},"yield":function(a){return this.then(function(){return a})},tap:function(a){return this.then(a)["yield"](this)},spread:function(a){return this.then(function(b){return x(b,function(b){return a.apply(W,b)})})},always:function(a,b){return this.then(a,a,b)}},r.prototype.when=function(a){return"function"==typeof a?a(this.value):this.value},s.prototype.when=function(a,b){if("function"==typeof b)return b(this.reason);throw this.reason};var K,L,M,N,O,P,Q,R,S,T,U,V,W;if(U=a,O=[],P=b.setTimeout,T="undefined"!=typeof console?console:c,"object"==typeof process&&process.nextTick)N=process.nextTick;else if(V=b.MutationObserver||b.WebKitMutationObserver)N=function(a,b,c){var d=a.createElement("div");return new b(c).observe(d,{attributes:!0}),function(){d.setAttribute("x","x")}}(document,V,H);else try{N=U("vertx").runOnLoop||U("vertx").runOnContext}catch(X){N=function(a){P(a,0)}}return Q=Function.prototype,R=Q.call,M=Q.bind?R.bind(R):function(a,b){return a.apply(b,L.call(arguments,2))},S=[],L=S.slice,K=S.reduce||function(a){var b,c,d,e,f;if(f=0,b=Object(this),e=b.length>>>0,c=arguments,c.length<=1)for(;;){if(f in b){d=b[f++];break}if(++f>=e)throw new TypeError}else d=c[1];for(;e>f;++f)f in b&&(d=a(d,b[f],f,b));return d},c})}("function"==typeof define&&define.amd?define:function(a){module.exports=a(require)},this),function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define("uxhr",b):a.uxhr=b()}(this,function(){"use strict";return function(a,b,c){b=b||"",c=c||{};var d=c.complete||function(){},e=c.success||function(){},f=c.error||function(){},g=c.headers||{},h=c.method||"GET",i=c.sync||!1,j=function(){return 0===a.indexOf("http")&&"undefined"!=typeof XDomainRequest?new XDomainRequest:new XMLHttpRequest}();if(!j)throw new Error("Browser doesn't support XHR");if("string"!=typeof b){var k=[];for(var l in b)k.push(l+"="+b[l]);b=k.join("&")}"ontimeout"in j&&(j.ontimeout=+c.timeout||0),j.onload=function(){d(j.responseText,j.status),e(j.responseText)},j.onerror=function(){d(j.responseText),f(j.responseText,j.status)},j.open(h,"GET"===h&&b?a+"?"+b:a,!i);for(var m in g)j.setRequestHeader(m,g[m]);return j.send("GET"!==h?b:null),j}}),function(){function b(a,b,c){for(var d=(c||0)-1,e=a?a.length:0;++d<e;)if(a[d]===b)return d;return-1}function c(a,c){var d=typeof c;if(a=a.cache,"boolean"==d||null==c)return a[c]?0:-1;"number"!=d&&"string"!=d&&(d="object");var e="number"==d?c:s+c;return a=(a=a[d])&&a[e],"object"==d?a&&b(a,c)>-1?0:-1:a?0:-1}function d(a){var b=this.cache,c=typeof a;if("boolean"==c||null==a)b[a]=!0;else{"number"!=c&&"string"!=c&&(c="object");var d="number"==c?a:s+a,e=b[c]||(b[c]={});"object"==c?(e[d]||(e[d]=[])).push(a):e[d]=!0}}function e(a){return a.charCodeAt(0)}function f(a,b){for(var c=a.criteria,d=b.criteria,e=-1,f=c.length;++e<f;){var g=c[e],h=d[e];if(g!==h){if(g>h||"undefined"==typeof g)return 1;if(h>g||"undefined"==typeof h)return-1}}return a.index-b.index}function g(a){var b=-1,c=a.length,e=a[0],f=a[c/2|0],g=a[c-1];if(e&&"object"==typeof e&&f&&"object"==typeof f&&g&&"object"==typeof g)return!1;var h=j();h["false"]=h["null"]=h["true"]=h.undefined=!1;var i=j();for(i.array=a,i.cache=h,i.push=d;++b<c;)i.push(a[b]);return i}function h(a){return"\\"+W[a]}function i(){return p.pop()||[]}function j(){return q.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function k(a){a.length=0,p.length<u&&p.push(a)}function l(a){var b=a.cache;b&&l(b),a.array=a.cache=a.criteria=a.object=a.number=a.string=a.value=null,q.length<u&&q.push(a)}function m(a,b,c){b||(b=0),"undefined"==typeof c&&(c=a?a.length:0);for(var d=-1,e=c-b||0,f=Array(0>e?0:e);++d<e;)f[d]=a[b+d];return f}function n(a){function d(a){return a&&"object"==typeof a&&!Zd(a)&&Hd.call(a,"__wrapped__")?a:new p(a)}function p(a,b){this.__chain__=!!b,this.__wrapped__=a}function q(a){function b(){if(d){var a=m(d);Id.apply(a,arguments)}if(this instanceof b){var f=W(c.prototype),g=c.apply(f,a||arguments);return Eb(g)?g:f}return c.apply(e,a||arguments)}var c=a[0],d=a[2],e=a[4];return Yd(b,a),b}function u(a,b,c,d,e){if(c){var f=c(a);if("undefined"!=typeof f)return f}var g=Eb(a);if(!g)return a;var h=Ad.call(a);if(!S[h])return a;var j=Wd[h];switch(h){case L:case M:return new j(+a);case O:case R:return new j(a);case Q:return f=j(a.source,A.exec(a)),f.lastIndex=a.lastIndex,f}var l=Zd(a);if(b){var n=!d;d||(d=i()),e||(e=i());for(var o=d.length;o--;)if(d[o]==a)return e[o];f=l?j(a.length):{}}else f=l?m(a):ee({},a);return l&&(Hd.call(a,"index")&&(f.index=a.index),Hd.call(a,"input")&&(f.input=a.input)),b?(d.push(a),e.push(f),(l?Yb:he)(a,function(a,g){f[g]=u(a,b,c,d,e)}),n&&(k(d),k(e)),f):f}function W(a){return Eb(a)?Nd(a):{}}function Y(a,b,c){if("function"!=typeof a)return Zc;if("undefined"==typeof b||!("prototype"in a))return a;var d=a.__bindData__;if("undefined"==typeof d&&(Xd.funcNames&&(d=!a.name),d=d||!Xd.funcDecomp,!d)){var e=Fd.call(a);Xd.funcNames||(d=!B.test(e)),d||(d=F.test(e),Yd(a,d))}if(d===!1||d!==!0&&1&d[1])return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return Ic(a,b)}function Z(a){function b(){var a=i?g:this;if(e){var o=m(e);Id.apply(o,arguments)}if((f||k)&&(o||(o=m(arguments)),f&&Id.apply(o,f),k&&o.length<h))return d|=16,Z([c,l?d:-4&d,o,null,g,h]);if(o||(o=arguments),j&&(c=a[n]),this instanceof b){a=W(c.prototype);var p=c.apply(a,o);return Eb(p)?p:a}return c.apply(a,o)}var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=1&d,j=2&d,k=4&d,l=8&d,n=c;return Yd(b,a),b}function $(a,d){var e=-1,f=ib(),h=a?a.length:0,i=h>=t&&f===b,j=[];if(i){var k=g(d);k?(f=c,d=k):i=!1}for(;++e<h;){var m=a[e];f(d,m)<0&&j.push(m)}return i&&l(d),j}function _(a,b,c,d){for(var e=(d||0)-1,f=a?a.length:0,g=[];++e<f;){var h=a[e];if(h&&"object"==typeof h&&"number"==typeof h.length&&(Zd(h)||mb(h))){b||(h=_(h,b,c));var i=-1,j=h.length,k=g.length;for(g.length+=j;++i<j;)g[k++]=h[i]}else c||g.push(h)}return g}function bb(a,b,c,d,e,f){if(c){var g=c(a,b);if("undefined"!=typeof g)return!!g}if(a===b)return 0!==a||1/a==1/b;var h=typeof a,j=typeof b;if(!(a!==a||a&&V[h]||b&&V[j]))return!1;if(null==a||null==b)return a===b;var l=Ad.call(a),m=Ad.call(b);if(l==J&&(l=P),m==J&&(m=P),l!=m)return!1;switch(l){case L:case M:return+a==+b;case O:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case Q:case R:return a==vd(b)}var n=l==K;if(!n){var o=Hd.call(a,"__wrapped__"),p=Hd.call(b,"__wrapped__");if(o||p)return bb(o?a.__wrapped__:a,p?b.__wrapped__:b,c,d,e,f);if(l!=P)return!1;var q=a.constructor,r=b.constructor;if(q!=r&&!(Db(q)&&q instanceof q&&Db(r)&&r instanceof r)&&"constructor"in a&&"constructor"in b)return!1}var s=!e;e||(e=i()),f||(f=i());for(var t=e.length;t--;)if(e[t]==a)return f[t]==b;var u=0;if(g=!0,e.push(a),f.push(b),n){if(t=a.length,u=b.length,g=u==t,g||d)for(;u--;){var v=t,w=b[u];if(d)for(;v--&&!(g=bb(a[v],w,c,d,e,f)););else if(!(g=bb(a[u],w,c,d,e,f)))break}}else ge(b,function(b,h,i){return Hd.call(i,h)?(u++,g=Hd.call(a,h)&&bb(a[h],b,c,d,e,f)):void 0}),g&&!d&&ge(a,function(a,b,c){return Hd.call(c,b)?g=--u>-1:void 0});return e.pop(),f.pop(),s&&(k(e),k(f)),g}function cb(a,b,c,d,e){(Zd(b)?Yb:he)(b,function(b,f){var g,h,i=b,j=a[f];if(b&&((h=Zd(b))||ie(b))){for(var k=d.length;k--;)if(g=d[k]==b){j=e[k];break}if(!g){var l;c&&(i=c(j,b),(l="undefined"!=typeof i)&&(j=i)),l||(j=h?Zd(j)?j:[]:ie(j)?j:{}),d.push(b),e.push(j),l||cb(j,b,c,d,e)}}else c&&(i=c(j,b),"undefined"==typeof i&&(i=b)),"undefined"!=typeof i&&(j=i);a[f]=j})}function db(a,b){return a+Ed(Vd()*(b-a+1))}function eb(a,d,e){var f=-1,h=ib(),j=a?a.length:0,m=[],n=!d&&j>=t&&h===b,o=e||n?i():m;if(n){var p=g(o);h=c,o=p}for(;++f<j;){var q=a[f],r=e?e(q,f,a):q;(d?!f||o[o.length-1]!==r:h(o,r)<0)&&((e||n)&&o.push(r),m.push(q))}return n?(k(o.array),l(o)):e&&k(o),m}function fb(a){return function(b,c,e){var f={};c=d.createCallback(c,e,3);var g=-1,h=b?b.length:0;if("number"==typeof h)for(;++g<h;){var i=b[g];a(f,i,c(i,g,b),b)}else he(b,function(b,d,e){a(f,b,c(b,d,e),e)});return f}}function gb(a,b,c,d,e,f){var g=1&b,h=2&b,i=4&b,j=16&b,k=32&b;if(!h&&!Db(a))throw new wd;j&&!c.length&&(b&=-17,j=c=!1),k&&!d.length&&(b&=-33,k=d=!1);var l=a&&a.__bindData__;if(l&&l!==!0)return l=m(l),l[2]&&(l[2]=m(l[2])),l[3]&&(l[3]=m(l[3])),!g||1&l[1]||(l[4]=e),!g&&1&l[1]&&(b|=8),!i||4&l[1]||(l[5]=f),j&&Id.apply(l[2]||(l[2]=[]),c),k&&Ld.apply(l[3]||(l[3]=[]),d),l[1]|=b,gb.apply(null,l);var n=1==b||17===b?q:Z;return n([a,b,c,d,e,f])}function hb(a){return ae[a]}function ib(){var a=(a=d.indexOf)===rc?b:a;return a}function jb(a){return"function"==typeof a&&Bd.test(a)}function kb(a){var b,c;return a&&Ad.call(a)==P&&(b=a.constructor,!Db(b)||b instanceof b)?(ge(a,function(a,b){c=b}),"undefined"==typeof c||Hd.call(a,c)):!1}function lb(a){return be[a]}function mb(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Ad.call(a)==J||!1}function nb(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c=b,b=!1),u(a,b,"function"==typeof c&&Y(c,d,1))}function ob(a,b,c){return u(a,!0,"function"==typeof b&&Y(b,c,1))}function pb(a,b){var c=W(a);return b?ee(c,b):c}function qb(a,b,c){var e;return b=d.createCallback(b,c,3),he(a,function(a,c,d){return b(a,c,d)?(e=c,!1):void 0}),e}function rb(a,b,c){var e;return b=d.createCallback(b,c,3),tb(a,function(a,c,d){return b(a,c,d)?(e=c,!1):void 0}),e}function sb(a,b,c){var d=[];ge(a,function(a,b){d.push(b,a)});var e=d.length;for(b=Y(b,c,3);e--&&b(d[e--],d[e],a)!==!1;);return a}function tb(a,b,c){var d=_d(a),e=d.length;for(b=Y(b,c,3);e--;){var f=d[e];if(b(a[f],f,a)===!1)break}return a}function ub(a){var b=[];return ge(a,function(a,c){Db(a)&&b.push(c)}),b.sort()}function vb(a,b){return a?Hd.call(a,b):!1}function wb(a){for(var b=-1,c=_d(a),d=c.length,e={};++b<d;){var f=c[b];e[a[f]]=f}return e}function xb(a){return a===!0||a===!1||a&&"object"==typeof a&&Ad.call(a)==L||!1}function yb(a){return a&&"object"==typeof a&&Ad.call(a)==M||!1}function zb(a){return a&&1===a.nodeType||!1}function Ab(a){var b=!0;if(!a)return b;var c=Ad.call(a),d=a.length;return c==K||c==R||c==J||c==P&&"number"==typeof d&&Db(a.splice)?!d:(he(a,function(){return b=!1}),b)}function Bb(a,b,c,d){return bb(a,b,"function"==typeof c&&Y(c,d,2))}function Cb(a){return Pd(a)&&!Qd(parseFloat(a))}function Db(a){return"function"==typeof a}function Eb(a){return!(!a||!V[typeof a])}function Fb(a){return Hb(a)&&a!=+a}function Gb(a){return null===a}function Hb(a){return"number"==typeof a||a&&"object"==typeof a&&Ad.call(a)==O||!1}function Ib(a){return a&&"object"==typeof a&&Ad.call(a)==Q||!1}function Jb(a){return"string"==typeof a||a&&"object"==typeof a&&Ad.call(a)==R||!1}function Kb(a){return"undefined"==typeof a}function Lb(a,b,c){var e={};return b=d.createCallback(b,c,3),he(a,function(a,c,d){e[c]=b(a,c,d)}),e}function Mb(a){var b=arguments,c=2;if(!Eb(a))return a;if("number"!=typeof b[2]&&(c=b.length),c>3&&"function"==typeof b[c-2])var d=Y(b[--c-1],b[c--],2);else c>2&&"function"==typeof b[c-1]&&(d=b[--c]);for(var e=m(arguments,1,c),f=-1,g=i(),h=i();++f<c;)cb(a,e[f],d,g,h);return k(g),k(h),a}function Nb(a,b,c){var e={};if("function"!=typeof b){var f=[];ge(a,function(a,b){f.push(b)}),f=$(f,_(arguments,!0,!1,1));for(var g=-1,h=f.length;++g<h;){var i=f[g];e[i]=a[i]}}else b=d.createCallback(b,c,3),ge(a,function(a,c,d){b(a,c,d)||(e[c]=a)});return e}function Ob(a){for(var b=-1,c=_d(a),d=c.length,e=nd(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e}function Pb(a,b,c){var e={};if("function"!=typeof b)for(var f=-1,g=_(arguments,!0,!1,1),h=Eb(a)?g.length:0;++f<h;){var i=g[f];i in a&&(e[i]=a[i])}else b=d.createCallback(b,c,3),ge(a,function(a,c,d){b(a,c,d)&&(e[c]=a)});return e}function Qb(a,b,c,e){var f=Zd(a);if(null==c)if(f)c=[];else{var g=a&&a.constructor,h=g&&g.prototype;c=W(h)}return b&&(b=d.createCallback(b,e,4),(f?Yb:he)(a,function(a,d,e){return b(c,a,d,e)})),c}function Rb(a){for(var b=-1,c=_d(a),d=c.length,e=nd(d);++b<d;)e[b]=a[c[b]];return e}function Sb(a){for(var b=arguments,c=-1,d=_(b,!0,!1,1),e=b[2]&&b[2][b[1]]===a?1:d.length,f=nd(e);++c<e;)f[c]=a[d[c]];return f}function Tb(a,b,c){var d=-1,e=ib(),f=a?a.length:0,g=!1;return c=(0>c?Sd(0,f+c):c)||0,Zd(a)?g=e(a,b,c)>-1:"number"==typeof f?g=(Jb(a)?a.indexOf(b,c):e(a,b,c))>-1:he(a,function(a){return++d>=c?!(g=a===b):void 0}),g}function Ub(a,b,c){var e=!0;b=d.createCallback(b,c,3);var f=-1,g=a?a.length:0;if("number"==typeof g)for(;++f<g&&(e=!!b(a[f],f,a)););else he(a,function(a,c,d){return e=!!b(a,c,d)});return e}function Vb(a,b,c){var e=[];b=d.createCallback(b,c,3);var f=-1,g=a?a.length:0;if("number"==typeof g)for(;++f<g;){var h=a[f];b(h,f,a)&&e.push(h)}else he(a,function(a,c,d){b(a,c,d)&&e.push(a)});return e}function Wb(a,b,c){b=d.createCallback(b,c,3);var e=-1,f=a?a.length:0;if("number"!=typeof f){var g;return he(a,function(a,c,d){return b(a,c,d)?(g=a,!1):void 0}),g}for(;++e<f;){var h=a[e];if(b(h,e,a))return h}}function Xb(a,b,c){var e;return b=d.createCallback(b,c,3),Zb(a,function(a,c,d){return b(a,c,d)?(e=a,!1):void 0}),e}function Yb(a,b,c){var d=-1,e=a?a.length:0;if(b=b&&"undefined"==typeof c?b:Y(b,c,3),"number"==typeof e)for(;++d<e&&b(a[d],d,a)!==!1;);else he(a,b);return a}function Zb(a,b,c){var d=a?a.length:0;if(b=b&&"undefined"==typeof c?b:Y(b,c,3),"number"==typeof d)for(;d--&&b(a[d],d,a)!==!1;);else{var e=_d(a);d=e.length,he(a,function(a,c,f){return c=e?e[--d]:--d,b(f[c],c,f)})}return a}function $b(a,b){var c=m(arguments,2),d=-1,e="function"==typeof b,f=a?a.length:0,g=nd("number"==typeof f?f:0);return Yb(a,function(a){g[++d]=(e?b:a[b]).apply(a,c)}),g}function _b(a,b,c){var e=-1,f=a?a.length:0;if(b=d.createCallback(b,c,3),"number"==typeof f)for(var g=nd(f);++e<f;)g[e]=b(a[e],e,a);else g=[],he(a,function(a,c,d){g[++e]=b(a,c,d)});return g}function ac(a,b,c){var f=-1/0,g=f;if("function"!=typeof b&&c&&c[b]===a&&(b=null),null==b&&Zd(a))for(var h=-1,i=a.length;++h<i;){var j=a[h];j>g&&(g=j)}else b=null==b&&Jb(a)?e:d.createCallback(b,c,3),Yb(a,function(a,c,d){var e=b(a,c,d);e>f&&(f=e,g=a)});return g}function bc(a,b,c){var f=1/0,g=f;if("function"!=typeof b&&c&&c[b]===a&&(b=null),null==b&&Zd(a))for(var h=-1,i=a.length;++h<i;){var j=a[h];g>j&&(g=j)}else b=null==b&&Jb(a)?e:d.createCallback(b,c,3),Yb(a,function(a,c,d){var e=b(a,c,d);f>e&&(f=e,g=a)});return g}function cc(a,b,c,e){if(!a)return c;var f=arguments.length<3;b=d.createCallback(b,e,4);var g=-1,h=a.length;if("number"==typeof h)for(f&&(c=a[++g]);++g<h;)c=b(c,a[g],g,a);else he(a,function(a,d,e){c=f?(f=!1,a):b(c,a,d,e)});return c}function dc(a,b,c,e){var f=arguments.length<3;return b=d.createCallback(b,e,4),Zb(a,function(a,d,e){c=f?(f=!1,a):b(c,a,d,e)}),c}function ec(a,b,c){return b=d.createCallback(b,c,3),Vb(a,function(a,c,d){return!b(a,c,d)})}function fc(a,b,c){if(a&&"number"!=typeof a.length&&(a=Rb(a)),null==b||c)return a?a[db(0,a.length-1)]:o;var d=gc(a);return d.length=Td(Sd(0,b),d.length),d}function gc(a){var b=-1,c=a?a.length:0,d=nd("number"==typeof c?c:0);return Yb(a,function(a){var c=db(0,++b);d[b]=d[c],d[c]=a}),d}function hc(a){var b=a?a.length:0;return"number"==typeof b?b:_d(a).length}function ic(a,b,c){var e;b=d.createCallback(b,c,3);var f=-1,g=a?a.length:0;if("number"==typeof g)for(;++f<g&&!(e=b(a[f],f,a)););else he(a,function(a,c,d){return!(e=b(a,c,d))});return!!e}function jc(a,b,c){var e=-1,g=Zd(b),h=a?a.length:0,m=nd("number"==typeof h?h:0);for(g||(b=d.createCallback(b,c,3)),Yb(a,function(a,c,d){var f=m[++e]=j();g?f.criteria=_b(b,function(b){return a[b]}):(f.criteria=i())[0]=b(a,c,d),f.index=e,f.value=a}),h=m.length,m.sort(f);h--;){var n=m[h];m[h]=n.value,g||k(n.criteria),l(n)}return m}function kc(a){return a&&"number"==typeof a.length?m(a):Rb(a)}function lc(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function mc(a){return $(a,_(arguments,!0,!0,1))}function nc(a,b,c){var e=-1,f=a?a.length:0;for(b=d.createCallback(b,c,3);++e<f;)if(b(a[e],e,a))return e;return-1}function oc(a,b,c){var e=a?a.length:0;for(b=d.createCallback(b,c,3);e--;)if(b(a[e],e,a))return e;return-1}function pc(a,b,c){var e=0,f=a?a.length:0;if("number"!=typeof b&&null!=b){var g=-1;for(b=d.createCallback(b,c,3);++g<f&&b(a[g],g,a);)e++}else if(e=b,null==e||c)return a?a[0]:o;return m(a,0,Td(Sd(0,e),f))}function qc(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(a=_b(a,c,d)),_(a,b)}function rc(a,c,d){if("number"==typeof d){var e=a?a.length:0;d=0>d?Sd(0,e+d):d||0}else if(d){var f=Ac(a,c);return a[f]===c?f:-1}return b(a,c,d)}function sc(a,b,c){var e=0,f=a?a.length:0;if("number"!=typeof b&&null!=b){var g=f;for(b=d.createCallback(b,c,3);g--&&b(a[g],g,a);)e++}else e=null==b||c?1:b||e;return m(a,0,Td(Sd(0,f-e),f))}function tc(){for(var a=[],d=-1,e=arguments.length,f=i(),h=ib(),j=h===b,m=i();++d<e;){var n=arguments[d];(Zd(n)||mb(n))&&(a.push(n),f.push(j&&n.length>=t&&g(d?a[d]:m)))}var o=a[0],p=-1,q=o?o.length:0,r=[];a:for(;++p<q;){var s=f[0];if(n=o[p],(s?c(s,n):h(m,n))<0){for(d=e,(s||m).push(n);--d;)if(s=f[d],(s?c(s,n):h(a[d],n))<0)continue a;r.push(n)}}for(;e--;)s=f[e],s&&l(s);return k(f),k(m),r}function uc(a,b,c){var e=0,f=a?a.length:0;if("number"!=typeof b&&null!=b){var g=f;for(b=d.createCallback(b,c,3);g--&&b(a[g],g,a);)e++}else if(e=b,null==e||c)return a?a[f-1]:o;return m(a,Sd(0,f-e))}function vc(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(0>c?Sd(0,d+c):Td(c,d-1))+1);d--;)if(a[d]===b)return d;return-1}function wc(a){for(var b=arguments,c=0,d=b.length,e=a?a.length:0;++c<d;)for(var f=-1,g=b[c];++f<e;)a[f]===g&&(Kd.call(a,f--,1),e--);return a}function xc(a,b,c){a=+a||0,c="number"==typeof c?c:+c||1,null==b&&(b=a,a=0);for(var d=-1,e=Sd(0,Cd((b-a)/(c||1))),f=nd(e);++d<e;)f[d]=a,a+=c;return f}function yc(a,b,c){var e=-1,f=a?a.length:0,g=[];for(b=d.createCallback(b,c,3);++e<f;){var h=a[e];b(h,e,a)&&(g.push(h),Kd.call(a,e--,1),f--)}return g}function zc(a,b,c){if("number"!=typeof b&&null!=b){var e=0,f=-1,g=a?a.length:0;for(b=d.createCallback(b,c,3);++f<g&&b(a[f],f,a);)e++}else e=null==b||c?1:Sd(0,b);return m(a,e)}function Ac(a,b,c,e){var f=0,g=a?a.length:f;for(c=c?d.createCallback(c,e,1):Zc,b=c(b);g>f;){var h=f+g>>>1;c(a[h])<b?f=h+1:g=h}return f}function Bc(){return eb(_(arguments,!0,!0))}function Cc(a,b,c,e){return"boolean"!=typeof b&&null!=b&&(e=c,c="function"!=typeof b&&e&&e[b]===a?null:b,b=!1),null!=c&&(c=d.createCallback(c,e,3)),eb(a,b,c)}function Dc(a){return $(a,m(arguments,1))}function Ec(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(Zd(c)||mb(c))var d=d?eb($(d,c).concat($(c,d))):c}return d||[]}function Fc(){for(var a=arguments.length>1?arguments:arguments[0],b=-1,c=a?ac(me(a,"length")):0,d=nd(0>c?0:c);++b<c;)d[b]=me(a,b);return d}function Gc(a,b){var c=-1,d=a?a.length:0,e={};for(b||!d||Zd(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function Hc(a,b){if(!Db(b))throw new wd;return function(){return--a<1?b.apply(this,arguments):void 0}}function Ic(a,b){return arguments.length>2?gb(a,17,m(arguments,2),null,b):gb(a,1,null,null,b)}function Jc(a){for(var b=arguments.length>1?_(arguments,!0,!1,1):ub(a),c=-1,d=b.length;++c<d;){var e=b[c];a[e]=gb(a[e],1,null,null,a)}return a}function Kc(a,b){return arguments.length>2?gb(b,19,m(arguments,2),null,a):gb(b,3,null,null,a)}function Lc(){for(var a=arguments,b=a.length;b--;)if(!Db(a[b]))throw new wd;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}}function Mc(a,b){return b="number"==typeof b?b:+b||a.length,gb(a,4,null,null,null,b)}function Nc(a,b,c){var d,e,f,g,h,i,j,k=0,l=!1,m=!0;if(!Db(a))throw new wd;if(b=Sd(0,b)||0,c===!0){var n=!0;m=!1}else Eb(c)&&(n=c.leading,l="maxWait"in c&&(Sd(b,c.maxWait)||0),m="trailing"in c?c.trailing:m);var p=function(){var c=b-(oe()-g);if(0>=c){e&&Dd(e);var l=j;e=i=j=o,l&&(k=oe(),f=a.apply(h,d),i||e||(d=h=null))}else i=Jd(p,c)},q=function(){i&&Dd(i),e=i=j=o,(m||l!==b)&&(k=oe(),f=a.apply(h,d),i||e||(d=h=null))};return function(){if(d=arguments,g=oe(),h=this,j=m&&(i||!n),l===!1)var c=n&&!i;else{e||n||(k=g);var o=l-(g-k),r=0>=o;r?(e&&(e=Dd(e)),k=g,f=a.apply(h,d)):e||(e=Jd(q,o))}return r&&i?i=Dd(i):i||b===l||(i=Jd(p,b)),c&&(r=!0,f=a.apply(h,d)),!r||i||e||(d=h=null),f}}function Oc(a){if(!Db(a))throw new wd;var b=m(arguments,1);return Jd(function(){a.apply(o,b)},1)}function Pc(a,b){if(!Db(a))throw new wd;var c=m(arguments,2);return Jd(function(){a.apply(o,c)},b)}function Qc(a,b){if(!Db(a))throw new wd;var c=function(){var d=c.cache,e=b?b.apply(this,arguments):s+arguments[0];return Hd.call(d,e)?d[e]:d[e]=a.apply(this,arguments)};return c.cache={},c}function Rc(a){var b,c;if(!Db(a))throw new wd;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}}function Sc(a){return gb(a,16,m(arguments,1))}function Tc(a){return gb(a,32,null,m(arguments,1))}function Uc(a,b,c){var d=!0,e=!0;if(!Db(a))throw new wd;return c===!1?d=!1:Eb(c)&&(d="leading"in c?c.leading:d,e="trailing"in c?c.trailing:e),T.leading=d,T.maxWait=b,T.trailing=e,Nc(a,b,T)}function Vc(a,b){return gb(b,16,[a])}function Wc(a){return function(){return a}}function Xc(a,b,c){var d=typeof a;if(null==a||"function"==d)return Y(a,b,c);if("object"!=d)return bd(a);var e=_d(a),f=e[0],g=a[f];return 1!=e.length||g!==g||Eb(g)?function(b){for(var c=e.length,d=!1;c--&&(d=bb(b[e[c]],a[e[c]],null,!0)););return d}:function(a){var b=a[f];return g===b&&(0!==g||1/g==1/b)}}function Yc(a){return null==a?"":vd(a).replace(de,hb)}function Zc(a){return a}function $c(a,b,c){var e=!0,f=b&&ub(b);b&&(c||f.length)||(null==c&&(c=b),g=p,b=a,a=d,f=ub(b)),c===!1?e=!1:Eb(c)&&"chain"in c&&(e=c.chain);var g=a,h=Db(g);Yb(f,function(c){var d=a[c]=b[c];h&&(g.prototype[c]=function(){var b=this.__chain__,c=this.__wrapped__,f=[c];Id.apply(f,arguments);var h=d.apply(a,f);if(e||b){if(c===h&&Eb(h))return this;h=new g(h),h.__chain__=b}return h})})}function _c(){return a._=zd,this}function ad(){}function bd(a){return function(b){return b[a]}}function cd(a,b,c){var d=null==a,e=null==b;if(null==c&&("boolean"==typeof a&&e?(c=a,a=1):e||"boolean"!=typeof b||(c=b,e=!0)),d&&e&&(b=1),a=+a||0,e?(b=a,a=0):b=+b||0,c||a%1||b%1){var f=Vd();return Td(a+f*(b-a+parseFloat("1e-"+((f+"").length-1))),b)}return db(a,b)}function dd(a,b){if(a){var c=a[b];return Db(c)?a[b]():c}}function ed(a,b,c){var e=d.templateSettings;a=vd(a||""),c=fe({},c,e);var f,g=fe({},c.imports,e.imports),i=_d(g),j=Rb(g),k=0,l=c.interpolate||E,m="__p += '",n=ud((c.escape||E).source+"|"+l.source+"|"+(l===C?z:E).source+"|"+(c.evaluate||E).source+"|$","g");a.replace(n,function(b,c,d,e,g,i){return d||(d=e),m+=a.slice(k,i).replace(G,h),c&&(m+="' +\n__e("+c+") +\n'"),g&&(f=!0,m+="';\n"+g+";\n__p += '"),d&&(m+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),k=i+b.length,b}),m+="';\n";var p=c.variable,q=p;q||(p="obj",m="with ("+p+") {\n"+m+"\n}\n"),m=(f?m.replace(w,""):m).replace(x,"$1").replace(y,"$1;"),m="function("+p+") {\n"+(q?"":p+" || ("+p+" = {});\n")+"var __t, __p = '', __e = _.escape"+(f?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+m+"return __p\n}";var r="\n/*\n//# sourceURL="+(c.sourceURL||"/lodash/template/source["+I++ +"]")+"\n*/";try{var s=qd(i,"return "+m+r).apply(o,j)}catch(t){throw t.source=m,t}return b?s(b):(s.source=m,s)}function fd(a,b,c){a=(a=+a)>-1?a:0;var d=-1,e=nd(a);for(b=Y(b,c,1);++d<a;)e[d]=b(d);return e}function gd(a){return null==a?"":vd(a).replace(ce,lb)}function hd(a){var b=++r;return vd(null==a?"":a)+b}function id(a){return a=new p(a),a.__chain__=!0,a}function jd(a,b){return b(a),a}function kd(){return this.__chain__=!0,this}function ld(){return vd(this.__wrapped__)}function md(){return this.__wrapped__}a=a?ab.defaults(X.Object(),a,ab.pick(X,H)):X;var nd=a.Array,od=a.Boolean,pd=a.Date,qd=a.Function,rd=a.Math,sd=a.Number,td=a.Object,ud=a.RegExp,vd=a.String,wd=a.TypeError,xd=[],yd=td.prototype,zd=a._,Ad=yd.toString,Bd=ud("^"+vd(Ad).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Cd=rd.ceil,Dd=a.clearTimeout,Ed=rd.floor,Fd=qd.prototype.toString,Gd=jb(Gd=td.getPrototypeOf)&&Gd,Hd=yd.hasOwnProperty,Id=xd.push,Jd=a.setTimeout,Kd=xd.splice,Ld=xd.unshift,Md=function(){try{var a={},b=jb(b=td.defineProperty)&&b,c=b(a,a,a)&&b}catch(d){}return c}(),Nd=jb(Nd=td.create)&&Nd,Od=jb(Od=nd.isArray)&&Od,Pd=a.isFinite,Qd=a.isNaN,Rd=jb(Rd=td.keys)&&Rd,Sd=rd.max,Td=rd.min,Ud=a.parseInt,Vd=rd.random,Wd={};Wd[K]=nd,Wd[L]=od,Wd[M]=pd,Wd[N]=qd,Wd[P]=td,Wd[O]=sd,Wd[Q]=ud,Wd[R]=vd,p.prototype=d.prototype;var Xd=d.support={};Xd.funcDecomp=!jb(a.WinRTError)&&F.test(n),Xd.funcNames="string"==typeof qd.name,d.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:C,variable:"",imports:{_:d}},Nd||(W=function(){function b(){}return function(c){if(Eb(c)){b.prototype=c;var d=new b;b.prototype=null}return d||a.Object()}}());var Yd=Md?function(a,b){U.value=b,Md(a,"__bindData__",U)}:ad,Zd=Od||function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Ad.call(a)==K||!1},$d=function(a){var b,c=a,d=[];if(!c)return d;if(!V[typeof a])return d;for(b in c)Hd.call(c,b)&&d.push(b);return d},_d=Rd?function(a){return Eb(a)?Rd(a):[]}:$d,ae={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},be=wb(ae),ce=ud("("+_d(be).join("|")+")","g"),de=ud("["+_d(ae).join("")+"]","g"),ee=function(a,b,c){var d,e=a,f=e;if(!e)return f;var g=arguments,h=0,i="number"==typeof c?2:g.length;if(i>3&&"function"==typeof g[i-2])var j=Y(g[--i-1],g[i--],2);else i>2&&"function"==typeof g[i-1]&&(j=g[--i]);for(;++h<i;)if(e=g[h],e&&V[typeof e])for(var k=-1,l=V[typeof e]&&_d(e),m=l?l.length:0;++k<m;)d=l[k],f[d]=j?j(f[d],e[d]):e[d];return f},fe=function(a,b,c){var d,e=a,f=e;if(!e)return f;for(var g=arguments,h=0,i="number"==typeof c?2:g.length;++h<i;)if(e=g[h],e&&V[typeof e])for(var j=-1,k=V[typeof e]&&_d(e),l=k?k.length:0;++j<l;)d=k[j],"undefined"==typeof f[d]&&(f[d]=e[d]);return f},ge=function(a,b,c){var d,e=a,f=e;if(!e)return f;if(!V[typeof e])return f;b=b&&"undefined"==typeof c?b:Y(b,c,3);for(d in e)if(b(e[d],d,a)===!1)return f;return f},he=function(a,b,c){var d,e=a,f=e;if(!e)return f;if(!V[typeof e])return f;b=b&&"undefined"==typeof c?b:Y(b,c,3);for(var g=-1,h=V[typeof e]&&_d(e),i=h?h.length:0;++g<i;)if(d=h[g],b(e[d],d,a)===!1)return f;return f},ie=Gd?function(a){if(!a||Ad.call(a)!=P)return!1;var b=a.valueOf,c=jb(b)&&(c=Gd(b))&&Gd(c);return c?a==c||Gd(a)==c:kb(a)}:kb,je=fb(function(a,b,c){Hd.call(a,c)?a[c]++:a[c]=1}),ke=fb(function(a,b,c){(Hd.call(a,c)?a[c]:a[c]=[]).push(b)}),le=fb(function(a,b,c){a[c]=b}),me=_b,ne=Vb,oe=jb(oe=pd.now)&&oe||function(){return(new pd).getTime()},pe=8==Ud(v+"08")?Ud:function(a,b){return Ud(Jb(a)?a.replace(D,""):a,b||0)};return d.after=Hc,d.assign=ee,d.at=Sb,d.bind=Ic,d.bindAll=Jc,d.bindKey=Kc,d.chain=id,d.compact=lc,d.compose=Lc,d.constant=Wc,d.countBy=je,d.create=pb,d.createCallback=Xc,d.curry=Mc,d.debounce=Nc,d.defaults=fe,d.defer=Oc,d.delay=Pc,d.difference=mc,d.filter=Vb,d.flatten=qc,d.forEach=Yb,d.forEachRight=Zb,d.forIn=ge,d.forInRight=sb,d.forOwn=he,d.forOwnRight=tb,d.functions=ub,d.groupBy=ke,d.indexBy=le,d.initial=sc,d.intersection=tc,d.invert=wb,d.invoke=$b,d.keys=_d,d.map=_b,d.mapValues=Lb,d.max=ac,d.memoize=Qc,d.merge=Mb,d.min=bc,d.omit=Nb,d.once=Rc,d.pairs=Ob,d.partial=Sc,d.partialRight=Tc,d.pick=Pb,d.pluck=me,d.property=bd,d.pull=wc,d.range=xc,d.reject=ec,d.remove=yc,d.rest=zc,d.shuffle=gc,d.sortBy=jc,d.tap=jd,d.throttle=Uc,d.times=fd,d.toArray=kc,d.transform=Qb,d.union=Bc,d.uniq=Cc,d.values=Rb,d.where=ne,d.without=Dc,d.wrap=Vc,d.xor=Ec,d.zip=Fc,d.zipObject=Gc,d.collect=_b,d.drop=zc,d.each=Yb,d.eachRight=Zb,d.extend=ee,d.methods=ub,d.object=Gc,d.select=Vb,d.tail=zc,d.unique=Cc,d.unzip=Fc,$c(d),d.clone=nb,d.cloneDeep=ob,d.contains=Tb,d.escape=Yc,d.every=Ub,d.find=Wb,d.findIndex=nc,d.findKey=qb,d.findLast=Xb,d.findLastIndex=oc,d.findLastKey=rb,d.has=vb,d.identity=Zc,d.indexOf=rc,d.isArguments=mb,d.isArray=Zd,d.isBoolean=xb,d.isDate=yb,d.isElement=zb,d.isEmpty=Ab,d.isEqual=Bb,d.isFinite=Cb,d.isFunction=Db,d.isNaN=Fb,d.isNull=Gb,d.isNumber=Hb,d.isObject=Eb,d.isPlainObject=ie,d.isRegExp=Ib,d.isString=Jb,d.isUndefined=Kb,d.lastIndexOf=vc,d.mixin=$c,d.noConflict=_c,d.noop=ad,d.now=oe,d.parseInt=pe,d.random=cd,d.reduce=cc,d.reduceRight=dc,d.result=dd,d.runInContext=n,d.size=hc,d.some=ic,d.sortedIndex=Ac,d.template=ed,d.unescape=gd,d.uniqueId=hd,d.all=Ub,d.any=ic,d.detect=Wb,d.findWhere=Wb,d.foldl=cc,d.foldr=dc,d.include=Tb,d.inject=cc,$c(function(){var a={};
return he(d,function(b,c){d.prototype[c]||(a[c]=b)}),a}(),!1),d.first=pc,d.last=uc,d.sample=fc,d.take=pc,d.head=pc,he(d,function(a,b){var c="sample"!==b;d.prototype[b]||(d.prototype[b]=function(b,d){var e=this.__chain__,f=a(this.__wrapped__,b,d);return e||null!=b&&(!d||c&&"function"==typeof b)?new p(f,e):f})}),d.VERSION="2.4.1",d.prototype.chain=kd,d.prototype.toString=ld,d.prototype.value=md,d.prototype.valueOf=md,Yb(["join","pop","shift"],function(a){var b=xd[a];d.prototype[a]=function(){var a=this.__chain__,c=b.apply(this.__wrapped__,arguments);return a?new p(c,a):c}}),Yb(["push","reverse","sort","unshift"],function(a){var b=xd[a];d.prototype[a]=function(){return b.apply(this.__wrapped__,arguments),this}}),Yb(["concat","slice","splice"],function(a){var b=xd[a];d.prototype[a]=function(){return new p(b.apply(this.__wrapped__,arguments),this.__chain__)}}),d}var o,p=[],q=[],r=0,s=+new Date+"",t=75,u=40,v=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",w=/\b__p \+= '';/g,x=/\b(__p \+=) '' \+/g,y=/(__e\(.*?\)|\b__t\)) \+\n'';/g,z=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,A=/\w*$/,B=/^\s*function[ \n\r\t]+\w/,C=/<%=([\s\S]+?)%>/g,D=RegExp("^["+v+"]*0+(?=.$)"),E=/($^)/,F=/\bthis\b/,G=/['\n\r\t\u2028\u2029\\]/g,H=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],I=0,J="[object Arguments]",K="[object Array]",L="[object Boolean]",M="[object Date]",N="[object Function]",O="[object Number]",P="[object Object]",Q="[object RegExp]",R="[object String]",S={};S[N]=!1,S[J]=S[K]=S[L]=S[M]=S[O]=S[P]=S[Q]=S[R]=!0;var T={leading:!1,maxWait:0,trailing:!1},U={configurable:!1,enumerable:!1,value:null,writable:!1},V={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},W={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},X=V[typeof a]&&a||this,Y=V[typeof exports]&&exports&&!exports.nodeType&&exports,Z=V[typeof module]&&module&&!module.nodeType&&module,$=Z&&Z.exports===Y&&Y,_=V[typeof global]&&global;!_||_.global!==_&&_.window!==_||(X=_);var ab=n();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(X._=ab,define(function(){return ab})):Y&&Z?$?(Z.exports=ab)._=ab:Y._=ab:X._=ab}.call(this);var b={VERSION:"0.0.1",defaults:{perPage:50}};a.DL=b,b.Client=function(a){this.url=a.url||"http://dl-api.dev/",this.appId=a.appId,this.key=a.key,this.keys=new b.KeyValues(this)},b.Client.prototype.collection=function(a){return new b.Collection(this,a)},b.Client.prototype.auth=function(a){return new b.Auth(this,a)},b.Client.prototype.collection=function(a){return new b.Collection(this,a)},b.Client.prototype.post=function(a,b){return"undefined"==typeof b&&(b={}),this.request(a,"POST",b)},b.Client.prototype.get=function(a,b){return this.request(a,"GET",b)},b.Client.prototype.put=function(a,b){return this.request(a,"PUT",b)},b.Client.prototype.delete=function(a){return this.request(a,"DELETE")},b.Client.prototype.request=function(a,b,c){var d,e=when.defer();return c&&(d=JSON.stringify(c),"GET"===b&&(d=encodeURIComponent(d))),uxhr(this.url+a,d,{method:b,headers:{"X-App-Id":this.appId,"X-App-Key":this.key,"Content-Type":"application/json"},success:function(a){e.resolver.resolve(JSON.parse(a))},error:function(a){e.resolver.reject(JSON.parse(a))}}),e.promise},b.Client.prototype.serialize=function(a,b){var c=[];for(var d in a)if(a.hasOwnProperty(d)){var e=b?b+"["+d+"]":d,f=a[d];c.push("object"==typeof f?this.serialize(f,e):encodeURIComponent(e)+"="+encodeURIComponent(f))}return c.join("&")},b.Iterable=function(){},b.Iterable.prototype={each:function(a){return this._iterate("each",a)},find:function(a){return this._iterate("find",a)},filter:function(a){return this._iterate("filter",a)},max:function(a){return this._iterate("max",a)},min:function(a){return this._iterate("min",a)},every:function(a){return this._iterate("every",a)},reject:function(a,b){return this._iterate("reject",a,b)},groupBy:function(a,b){return this._iterate("groupBy",a,b)},_iterate:function(a,b,c){var d=this;return this.then(function(e){_[a].call(d,e,b,c)}),this}},b.Auth=function(a,b){this.client=a,this.provider=b,this.segments="auth/"+this.provider+"/CAAD2jhum0ZCsBAD8bPT5ThKE6YnRvllsoKPa5YvyhxzRl2HTLwcZBc3tUuXFrGEqthJM7TeL8wuBtkQBEQGs3QdmbaxkZALragniqYSBTRRRUNVFxaXJN35EwBDPPatYEWgYOR7M5ZBICLmRiXvRel8pcUiBRA6AoUqzPCaeAOpDJNvhA1MufvTIX7PzXnQZD"},b.Auth.prototype.register=function(){return this.client.post(this.segments)},b.Collection=function(a,b){this.client=a,this.name=this._validateName(b),this.wheres=[],this.ordering=[],this._limit=null,this._offset=null;var c=["files"];this.segments=-1!==c.indexOf(this.name)?this.name:"collection/"+this.name},b.Collection.prototype=new b.Iterable,b.Collection.prototype.constructor=b.Collection,b.Collection.prototype.create=function(a){return this.client.post(this.segments,{data:a})},b.Collection.prototype.get=function(a){return this.client.get(this.segments,this.buildQuery(a))},b.Collection.prototype.buildQuery=function(a){var b={};return null!==this._limit&&(b.limit=this._limit),null!==this._offset&&(b.offset=this._offset),this.wheres.length>0&&(b.q=this.wheres),this.ordering.length>0&&(b.s=this.ordering),this.reset(),"undefined"!=typeof a&&(a.paginate&&(b.p=a.paginate),a.first&&(b.f=1)),b},b.Collection.prototype.where=function(a,b,c){var d,e="undefined"==typeof c?"=":b,f="undefined"==typeof c?b:c;if("object"==typeof a)for(d in a)a.hasOwnProperty(d)&&(a[d]instanceof Array?(e=a[d][0],f=a[d][1]):f=a[d],this.addWhere(d,e,f));else this.addWhere(a,e,f);return this},b.Collection.prototype.first=function(){var a=this.get({first:!0});return a.then.apply(a,arguments),a},b.Collection.prototype.then=function(){var a=this.get();return a.then.apply(a,arguments),a},b.Collection.prototype.addWhere=function(a,b,c){return this.wheres.push([a,b,c]),this},b.Collection.prototype.reset=function(){return this.wheres=[],this},b.Collection.prototype.sort=function(a,b){return b?"number"==typeof b&&(b=-1===parseInt(b,10)?"desc":"asc"):b="asc",this.ordering.push([a,b]),this},b.Collection.prototype.limit=function(a){return this._limit=a,this},b.Collection.prototype.offset=function(a){return this._offset=a,this},b.Collection.prototype.stream=function(a){return new b.Stream(this,a)},b.Collection.prototype.paginate=function(a,c){var d=new b.Pagination(this);return c||(c=a,a=b.defaults.perPage),this.get({paginate:a}).then(function(a){d._fetchComplete(a),c&&c(d)}),d},b.Collection.prototype.count=function(){var a=this.client.get(this.segments+"/count");return a.then.apply(a,arguments),a},b.Collection.prototype.drop=function(){return this.client.delete(this.segments)},b.Collection.prototype.delete=function(a){return this.client.delete(this.segments+"/"+a)},b.Collection.prototype.update=function(a,b){return this.client.post(this.segments+"/"+a,{data:b})},b.Collection.prototype.updateAll=function(){throw new Error("Not implemented.")},b.Collection.prototype._validateName=function(a){var b=/^[a-z]+$/;if(!b.test(a))throw new Error("Invalid name: "+a);return a},b.File=function(a){this.client=a,this.upload=function(){}},b.KeyValues=function(a){this.client=a},b.KeyValues.prototype.get=function(a,b){var c=this.client.get("key/"+a);return b&&c.then.apply(c,[b]),c},b.KeyValues.prototype.set=function(a,b){return this.client.post("key/"+a,{value:b})},b.Pagination=function(a){this.fetching=!0,this.collection=a},b.Pagination.prototype._fetchComplete=function(a){this.fetching=!1,this.total=a.total,this.per_page=a.per_page,this.current_page=a.current_page,this.last_page=a.last_page,this.from=a.from,this.to=a.to,this.data=a.data},b.Pagination.prototype.hasNext=function(){return this.current_page<this.to},b.Pagination.prototype.isFetching=function(){return this.fetching},b.Pagination.prototype.then=function(){},b.Stream=function(a,b){b||(b={}),this.collection=a,this.retry_timeout=b.retry_timeout||5,this.refresh_timeout=b.refresh_timeout||5,this.from_now=b.from_now||!1;var c=this.collection.buildQuery();if(c["X-App-Id"]=this.collection.client.appId,c["X-App-Key"]=this.collection.client.key,c.from_now=this.from_now,c.stream={retry:this.retry_timeout,refreh:this.refresh_timeout},this.event_source=new EventSource(this.collection.client.url+this.collection.segments+"?"+JSON.stringify(c),{withCredentials:!0}),"function"==typeof b)this.on("message",b);else for(var d in b)this.on(d,b[d])},b.Stream.prototype.on=function(a,b){var c=this;return"message"==a?this.event_source.onmessage=function(a){b.apply(c,[JSON.parse(a.data),a])}:this.event_source["on"+a]=function(a){b.apply(c,[a])},this},b.Stream.prototype.close=function(){return this.event_source.close(),this}}(this);